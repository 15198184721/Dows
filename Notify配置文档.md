## 中台通知配置说明：

### 参考原型：
https://app.mockplus.cn/run/prototype/ZIuBzEZub0TF/JMuHwMknqp4YS/jb7HtQ__ootGs?cps=expand&ha=1&la=1

#### --------------------【非UI模板相关字段说明】--------------------
```
refreshInterval : 300               # 配置自动刷新时间(单位：秒)，注意：最低不能低于10秒,小于10秒按10秒计算
redPackageMinAmount : 0.5           # 通知红包开出的红包最小金额(单位：元)
redPackageMaxAmount : 2             # 通知红包开出的红包最大金额(单位：元)
redPackageDoubleProportion : 2      # 翻倍领取的比例(例如：1.1上浮10%，2 = 两倍)
conditionsPools :                   # 当前配合中的【锚定池】,就是提供给条件池使用的锚定池(所有锚定值获取方法池),注意：从0开始,第1个实际应该写成：0
      - executioMethod : com.AA#CA  # ,要求：(方法的要求：返回类型(int),参数：无)
      - executioMethod : com.AA#CB  # ,要求：(方法的要求：返回类型(int),参数：无)
      - executioMethod : com.AA#CC  # ,要求：(方法的要求：返回类型(int),参数：无)
      - executioMethod : com.AA#CD  # ,要求：(方法的要求：返回类型(int),参数：无)
notifyConfigs :                     # 通知的数据配置(是一个列表。可配置多个条件的类型)
  - id : 0                                    # 分类的id(所有分类中必须唯一，否则可能影响前端对分类最大的统计和排异显示判断)
    isOpen : true                             # 是否这个通知是否生效 (true:通知生效(默认)，false:关闭通知)
    registerMore  : 1200                      # 条件：超过注册时间的分钟数，如果<0:表示此条件一定满足,可作为默认项配置 (单位：秒)
    notifyMaxCount : 100                      # 当前这类通知的允许出现的最大次数
    dayReceiveRedCount: 0                     # 条件：当日已领取红包的个数，如果<0:表示此条件一定满足,可作为默认项配置 (单位：个)
    dayLotteryCodeCount : 0                   # 条件：当日已获取抽奖码的个数，如果<0:表示此条件一定满足,可作为默认项配置 (单位：个)
    judgeConditions :                         # 新条件集合,可配置多个条件组合
      - condition : (<1,3,5-8)&               # 组合条件1:需要设置的条件,各个条件之间使用","分隔,区间值使用"-"分隔,单数字的支持符号:">"、"<"，如果没有写明则是默认必须等于值
      - condition : (<1,3,5-8)&               # 组合条件1:需要设置的条件,各个条件之间使用","分隔,区间值使用"-"分隔,单数字的支持符号:">"、"<"，如果没有写明则是默认必须等于值
    anchorCollection : 0,3                    # 使用锚定池中的：0(CA),1(CD),注：(0,3 分别和 judgeConditions 中条件一一对应,更多条件只要一一对应即可)
    uiTemplate :                              # 以上条件下的UI模板配置，参数看考:参数说明
      # - 此处字段参考[UI模板相关配置参数]，是一个列表。可配置多个UI模板
```

### 非UI模板特(通用字段)殊字段说明  
  **`judgeConditions`**          : 新条件集合,可配置多个条件组合  
  
       - condition               : 条件表达式(具体的条件表达式)
       符号说明：
        () : 所有的条件都必须再括号之间,
        ,  : 括号是一系列条件组合体，每个条件必须使用此分隔符进行分隔
        =  : 表示等于当前值(默认的，无需显式配置)
        >  : 表示大于当前条件的值
        <  : 表示小于于当前条件的值
        -  : 表示一个区间值,表示目标值必须满足再此区间(包括左右极限值)
        &  : 表示当前条件和下一个条件之间的运算关系为"并且",都需要满足   (注：如果是最后一个条件可以不配置,如果没有配置默认使用此标志符号)
        |  : 表示当前条件和下一个条件之间的运算关系为"或者",满足其一即可 (注：如果是最后一个条件可以不配置)
          
      【示例1】
        judgeConditions :                 # 新条件集合,可配置多个条件组合
          - condition : (<1,3,5-8,>10)&   # 条件1，解释：【锚定值 => (<1 或 =3 或 (>=5 && <= 8) 或 >10) "并且满足" 下一个条件的结果】,"&"表示和下一个条件必须都满足，"|"表示满足一个即可
          - condition : (0,1,>10)&        # 条件2,j解释：【锚定值 => (=0 或 =1 或 >10)】,"&" 最后一个条件的无实际作用可以不配置，参考:示例2
      【示例2】
        judgeConditions :                 # 新条件集合,可配置多个条件组合
          - condition : (<1,3,5-8)|       # 条件1，解释：【锚定值 => <1 或 =3 或 (>=5 并且 <=8) "或者满足" 下一个条件】,"&"表示和下一个条件必须都满足，"|"表示满足一个即可
          - condition : (0,1,6,7)         # 条件2，解释：【锚定值 => =0 或 =1 或 =6 或 =7】(最后一个可以不指定逻辑运算符号)
      
  **`conditionalProcess`**       ： 对应条件集合的相关位置锚定值的获取方法配置
  
       - executioMethod          ： 获取条件集合对应位置的锚定值的方法，配置参考："示例" 
       符号说明：
          注意：方法必须是此签名方法：[public | private] [static] int 方法名称()
          # ：类名和方法名称的分隔符，例如：com.aaa.bb#getCurrentNumber() ,方法可以是静态也可以不是。共有或私有都可以。但如果不是静态方法则必须提供无参数构造方法
          
      【示例】
        conditionalProcess :                                    # 条件集合的相关锚定值
          - executioMethod :  com.aaa.bb#getCurrentNumber     # 【条件1】的锚定值获取方法
          - executioMethod :  com.aaa.bb#getCurrentNumber2    # 【条件2】的锚定值获取方法

#### --------------------【UI模板相关的配置说明】--------------------
#### 多UI模板参数冲突展示规则： 
   *条件随机 + (UI模板类型排异 + UI模板随机) + 同类型同模板排异 //所有条件单项：(非必要排斥上一次)*  
 
#### 支持标签： 
  *`${app_name}`*           ：使用app的名称填充   
  *`${app_icon}`*           ：使用app的图标填充(仅限图片相关字段使用)  
  *`${wx_name}`*            ：使用微信名称填充内容           
  *`${wx_head}`*            ：使用微信头像填充内容  
  *`${?random_()}`*         : (动态标签) 产生一个默认的随机数进行填充，暂只支持整数  
  *`${?random_(100)}`*      : (动态标签) 产生一个100以内的随机数填充,[100] 可自行设置，暂只支持整数  
  *`${?random_(0,100)}`*    : (动态标签) 产生一个0-100范围内的数填充,[0,100] 可自行调整，支持整数和小数  
  *`${字段名称}`*            ：使用当前模板自身的对象填充内容(例如：${title} 表示使用当前UI模板的[title]字段的内容进行填充内容)   

### UI模板特别字段说明：
**`action`** ：跳转字段说明。遵循以下协议和规范

    支持协议： 
        http、https  : 跳转到一个网络地址(正常的网络地址即可)  
        notifyAction : 跳转到一个应用内页面。协议遵循http协议的get地址协议标准： 
    【示例】  
          示例1(参数为默认类型省略类型):   
            notifyAction://com.donews.web.ui.WebViewObjActivity?title=中台配置的标题&url=http://www.baidu.com  
          示例2(声明参数类型)：  
            notifyAction://com.donews.web.ui.WebViewObjActivity?title=(S)中台配置的标题&url=(S)http://www.baidu.com  
    【自定义参数】 : 根据页面参数实际需要配置,但是遵循get请求标准和以下类型约定【注:如果配置出错默认当字符串处理】  
         (S)      ：[默认] 字符串类型(String),没有指定类型默认为此类型  
         (I)      ：整数类型(int)  
         (L)      ：长整数类型(long)  
         (F)      ：小数类型(float)  
         (D)      ：长小数类型(double)  
         (B)      ：逻辑类型(boolean)，true或false   
         ([?)     ：数组类型,"?" 可以是以上任意类型。表示是一个指定类型的数组,内容用"|"分割  
              例如：([S)A|B|C  -> 表示一个String数组,包含元素A B C => {"A","B","C"},以此类推  
         ([?])    ：列表类型(注：只支持类型：S,I),"?" 可以是以上任意类型。表示是一个指定类型的列表,内容用"|"分割  
              例如：([S])A|B|C  -> 表示一个String数组,包含元素A B C => List{"A","B","C"},只支持类型：(S)、(I)  
                 【暂不支持其他类型参数,后续根据实际情况考虑增加支持】  

        
### UI模本分类ID
    0 : 原始模板(大小图的)
    1 : 抽奖引导1：桌面顶部
    2 : 抽奖引导2：顶部
    3 : 红包引导1：顶部 — 头像、红包引导1：顶部 — 昵称
    4 : 红包引导2：桌面顶部
    5 : 红包引导3：底部 — 金额、红包引导4：底部 — 配图

#### UI模板0参数字段解释(最原始模板：桌面顶部)：
  ```
  id : 0           # (必填) ui模板id
  isOpen           # (必填) 是否这个通知是否生效(true:通知生效，false:关闭通知(默认))
  action           # (必填) 点击执行的动作(后面约定)
  orientation      # (可选) 当前通知弹出的方式，如果不设置则以客户端默认给每个UI模板的配置为准：(<0：客户端默认配置,0：顶部，1：底部,>=2：中间弹出)
  暂不支持参数配置(【桌面通知模块配置】中配置)
  ```
 
#### UI模板1参数字段解释(抽奖引导1：桌面顶部)：
> ![UI模板1](https://github.com/15198184721/Dows/blob/main/images/notifys/temp1.png)
>  ```
>  id               # (必填) 模板id，来源必须为[UI模本分类ID]的其中之一
>  isOpen           # (必填) 是否这个通知是否生效(true:通知生效，false:关闭通知(默认))
>  title            # (必填) 标题描述(最顶部的标题)
>  name             # (必填) 名称部分(微信名称)，如果配置文字则直接显示文字。如果需要前端使用微信名称填充请配置为:${wx_name}
>  desc             # (必填) 描述(名称下位置处的描述信息)
>  iconLeftTopMin   # (可选) 左侧的小图标(顶部标题边上的小图标), 注：如果为""或不配置。则不显示此图标
>  goodImages       # (可选) 商品右侧的图片集合,注：如果不配置。则不显示此图标
>    - goodIcon :   # (可选) 展示的商品的图标路径(暂不支持标签)
>  action           # (必填) 点击执行的动作(后面约定)
>  orientation      # (可选) 当前通知弹出的方式，如果不设置则以客户端默认给每个UI模板的配置为准：(<0：客户端默认配置,0：顶部，1：底部,>=2：中间弹出)
>  ```

#### UI模板2参数字段解释(抽奖引导2：顶部)：
> ![UI模板1](https://github.com/15198184721/Dows/blob/main/images/notifys/temp2.png)
>  ```
>  id               # (必填) 模板id，来源必须为[UI模本分类ID]的其中之一
>  isOpen           # (必填) 是否这个通知是否生效(true:通知生效，false:关闭通知(默认))
>  iconLeft         # (必填) 左侧的Icon
>  title            # (必填) 中间第一行标题
>  desc             # (必填) 中间第二行描述
>  buttonLeft       # (可选) 左侧按钮文字(为""或者不设置此字段不显示左侧按钮)
>  buttonRight      #/ (可选) 右侧按钮文字(为""或者不设置此字段不显示左侧按钮)
>  action           # (必填) 点击执行的动作(后面约定)
>  orientation      # (非必填) 当前通知弹出的方式，如果不设置则以客户端默认给每个UI模板的配置为准：(<0：客户端默认配置,0：顶部，1：底部,>=2：中间弹出)
>  ```
  
#### UI模板3参数字段解释(红包引导1：顶部 — 头像、红包引导1：顶部 — 昵称)：
>  ![UI模板1](https://github.com/15198184721/Dows/blob/main/images/notifys/temp3.png)
>  ```
>  id               # (必填) 模板id，来源必须为[UI模本分类ID]的其中之一
>  isOpen           # (必填) 是否这个通知是否生效(true:通知生效，false:关闭通知(默认))
>  iconLeft         # (必填) 左侧的Icon
>  title            # (必填) 中间第一行标题
>  desc             # (必填) 中间第二行描述(1、如果描述需要以当前配置下的title为前缀:那么请加上:${title} 2、如需要使用微信头像填充请使用：${wx_name})
>  iconRight        # (可选) 右侧icon的url,如果需要使用微信头像填充设置为：${wx_head} (如果不显示图标设置为:""或者不设置)
>  action           # (必填) 点击执行的动作(后面约定)
>  orientation      # (可选) 当前通知弹出的方式，如果不设置则以客户端默认给每个UI模板的配置为准：(<0：客户端默认配置,0：顶部，1：底部,>=2：中间弹出)
>  ```

#### UI模板4参数字段解释(红包引导2：桌面顶部)
>  ![UI模板1](https://github.com/15198184721/Dows/blob/main/images/notifys/temp4.png)
>  ```
>  id               # (必填) 模板id，来源必须为[UI模本分类ID]的其中之一
>  isOpen           # (必填) 是否这个通知是否生效(true:通知生效，false:关闭通知(默认))
>  title            # (必填) 中间第一行标题
>  namePrefix       # (必填) (服务对象)前缀描述文案
>  name             # (必填) (服务对象)描述文案
>  descPrefix       # (必填) (权益内容)前缀描述文案
>  desc             # (必填) (权益内容)描述文案
>  timePrefix       # (必填) (生效时间)前缀描述文案
>  iconRight        # (可选) 右侧icon的url,如果需要使用微信头像填充设置为：${wx_head} (如果不显示图标设置为:""或者不设置)
>  action           # (必填) 点击执行的动作(后面约定)
>  orientation      # (可选) 当前通知弹出的方式，如果不设置则以客户端默认给每个UI模板的配置为准：(<0：客户端默认配置,0：顶部，1：底部,>=2：中间弹出)
>  ```

#### UI模板5参数字段解释(红包引导3：底部 — 金额、红包引导4：底部 — 配图)：
>  ![UI模板1](https://github.com/15198184721/Dows/blob/main/images/notifys/temp5.png)
>  ```
>  id               # (必填) 模板id，来源必须为[UI模本分类ID]的其中之一
>  isOpen           # (必填) 是否这个通知是否生效(true:通知生效，false:关闭通知(默认))
>  type             # (必填) 是图标模式还是金额模式 (0：金额模式，1：图标模式)
>  titleNumnerDesc  # (金额模式必填) 金额模式下,金额顶部的描述(仅金额模式下有效)
>  titlePrefix      # (必填) 第一行标题左侧前缀的文案(例如：收款账户)
>  title            # (必填) 第一行标题右侧的文案(例如：零钱)
>  descPrefix       # (必填) 第二行左侧描述的前缀文案(例如：收款备注)
>  desc             # (必填) 第二行右侧描述的前缀文案(例如：收款通知-来自商家转账)
>  action           # (必填) 点击执行的动作(后面约定)
>  buttonLeft       # (必填) 按钮文字 (因为只有一个按钮。所以公用了左侧按钮的字段作为设置依据)
>  orientation      # (可选) 当前通知弹出的方式，如果不设置则以客户端默认给每个UI模板的配置为准：(<0：客户端默认配置,0：顶部，1：底部,>=2：中间弹出)
>  goodImages       # (图标模式-必填) 商品图片集合(至少一张)
>    - goodIcon :   # (必填) 展示的商品的图标路径(暂不支持标签)
>  ```
  
  <p align="right">更新于:2022.1.20日</p>
